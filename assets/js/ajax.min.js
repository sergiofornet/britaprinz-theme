"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,r):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function artworksList(t){var n="";return"object"===_typeof(t)?(n+='<ul class="artworks__list">',t.forEach(function(t){var r=t.artwork_techniques,e=r.featured_techniques,r=r.other_techniques;n+='\n\t\t\t<li class="artwork" key="artwork-'.concat(t.slug,'">\n\t\t\t\t<button class="artwork__title">').concat(t.title.rendered,'</button>\n\t\t\t\t<div class="artwork__info">\n\t\t\t\t\t').concat(t.artwork_image_src?'<div class="artwork__thumbnail"><a href="'.concat(t.link,'" data-artwork="').concat(t.id,'">').concat(t.artwork_image_src,"</a></div>"):"",'\n\t\t\t\t\t<div class="artwork__year">').concat(t.bp_artwork_year,'</div>\n\t\t\t\t\t<div class="artwork__condition">').concat(t.bp_artwork_condition,'</div>\n\t\t\t\t\t<div class="artwork__copy">').concat(t.bp_artwork_copy,'</div>\n\t\t\t\t\t<div class="artwork__paper">').concat(t.bp_artwork_paper,'</div>\n\t\t\t\t\t<div class="artwork__size">').concat(t.bp_artwork_size,"</div>\n\t\t\t\t\t").concat(t.artwork_loan?'<div class="artwork__loan">'.concat(t.artwork_loan,"</div>"):"","\n\t\t\t\t\t").concat(t.artwork_sale?'<div class="artwork__sale">'.concat(t.artwork_sale,"</div>"):"",'\n\t\t\t\t\t<div class="artwork__techniques">\n\t\t\t\t\t\t').concat(e.map(function(t){return'<a class="technique" href="'.concat(t[1],'">').concat(t[0],"</a>")}).join("\n"),"\n\t\t\t\t\t\t").concat(r&&"<span>".concat(r,"</span>"),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="artwork__description">').concat(t.artwork_info,"</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t")}),n+="</ul>"):n=t,n}function asyncGeneratorStep(t,r,e,n,a,o,c){try{var i=t[o](c),s=i.value}catch(t){return void e(t)}i.done?r(s):Promise.resolve(s).then(n,a)}function _asyncToGenerator(i){return function(){var t=this,c=arguments;return new Promise(function(r,e){var n=i.apply(t,c);function a(t){asyncGeneratorStep(n,r,e,a,o,"next",t)}function o(t){asyncGeneratorStep(n,r,e,a,o,"throw",t)}a(void 0)})}}function asyncFetch(t,r){return _asyncFetch.apply(this,arguments)}function _asyncFetch(){return(_asyncFetch=_asyncToGenerator(regeneratorRuntime.mark(function t(r,e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(r,e);case 2:return n=t.sent,n=n.ok?n.json():"",t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){var t=ajax_var.nonce,r=ajax_var,e=r.lang,n=r.searchUrl,r=r.artistId;console.log(ajax_var);var a={method:"get",headers:new Headers({"Content-Type":"application/json","X-WP-Nonce":t}),credentials:"same-origin"},o=document.querySelector(".artist-search"),c=document.querySelector(".artists__list"),i=new IntersectionObserver(function(t){t.forEach(function(t){var r=document.querySelector(".initial__button[data-target*=".concat(t.target.dataset.initial,"]"));.5<=t.intersectionRatio?r.classList.add("active"):r.classList.remove("active")})},{rootMargin:"0px 0px -85% 0px",root:c,threshold:.5}),s=document.querySelector(".artworks"),l=document.querySelector(".artwork-gallery");l.querySelector(".artwork-gallery__close button").addEventListener("click",function(){return l.classList.toggle("hidden")});var u=l.querySelector(".artwork-gallery__slider");document.querySelectorAll(".initial__button").forEach(function(r){var e=new MoveTo({tolerance:10,duration:500,easing:"easeOutQuart",container:c});r.addEventListener("click",function(){var t=r.dataset.target,t=document.querySelector("[data-initial=".concat(t.toLowerCase(),"]"));e.move(t)})});function d(t,r,a,e,n){var o,n=4<arguments.length&&void 0!==n?n:"";console.log(r),o=n||(t.preventDefault(),t.target.dataset.artist);var c="".concat(r.artworkUrl,"?artist=").concat(o,"&order=asc&orderby=slug"),i="".concat(r.artistUrl,"/").concat(o);a.innerHTML="",a.classList.add("loading"),asyncFetch(c,e).then(function(n){console.log(c);var t=artworksList(n);a.insertAdjacentHTML("beforeend",t);var r=document.querySelectorAll(".artworks__list .artwork"),t=document.querySelectorAll(".artwork__thumbnail a");r.forEach(function(t){var r=t.querySelector(".artwork__info");t.querySelector(".artwork__title").addEventListener("click",function(t){r.classList.toggle("visible")})}),t.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),l.classList.toggle("hidden");var r,e=t.currentTarget.dataset.artwork;n.some(function(t){return t.id===parseInt(e)})&&(u.innerHTML="",(r=document.createElement("div")).classList.add("slides"),u.insertAdjacentElement("afterbegin",r),n.filter(function(t){return t.id===parseInt(e)})[0].artwork_image_gallery.forEach(function(t){return r.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t<div class="slide">\n\t\t\t\t\t\t\t\t'.concat(t,"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"))}),u.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t<div class="controls">\n\t\t\t\t\t\t\t\t<button class="previous-slide">←</button>\n\t\t\t\t\t\t\t\t<button class="next-slide">→</button>\n\t\t\t\t\t\t\t</div>'),new Slider(u))})})}).then(function(){return a.classList.remove("loading")}),asyncFetch(i,e).then(function(t){console.log(i);var r=t.name,e=t.artist_bio,e="object"===_typeof(t)?'\n\t\t\t\t<div class="artworks__artist">\n\t\t\t\t\t<h2 class="artist__name">'.concat(r,"</h2>\n\t\t\t\t\t").concat(e?'<div class="artist__bio">'.concat(e,"</div>"):"","\n\t\t\t\t</div>\n\t\t\t\t"):o;a.insertAdjacentHTML("afterbegin",e)})}function _(t,r,n,e){t="".concat(e?"".concat(t,"?lang=").concat(e):"".concat(t)),console.log(t),n.classList.add("loading"),asyncFetch(t,r).then(function(t){n.innerHTML="",Array.isArray(t)?_toConsumableArray(new Set(t.map(function(t){return t.order.trim()[0].toLowerCase()}).sort())).forEach(function(r){var e=document.createElement("div");e.classList.add("artists-group"),e.dataset.initial=r,e.insertAdjacentHTML("afterbegin",'\n\t\t\t\t\t\t\t<span class="artists-group__label">'.concat(r,"</span>\n\t\t\t\t\t\t")),t.filter(function(t){return t.order.trim()[0].toLowerCase()===r}).forEach(function(t){var r=document.createElement("button");r.dataset.artist=t.term_id,r.classList.add("artist__button"),r.classList.add("inactive"),r.insertAdjacentText("afterbegin",t.name),r.addEventListener("click",function(t){t.currentTarget.classList.contains("inactive")?(document.querySelector(".artist__button.active")&&document.querySelector(".artist__button.active").classList.replace("active","inactive"),d(t,ajax_var,s,a),t.currentTarget.classList.replace("inactive","active")):(t.currentTarget.classList.replace("active","inactive"),s.innerHTML="")}),e.insertAdjacentElement("beforeend",r)}),n.insertAdjacentElement("beforeend",e),i.observe(e)}):n.innerHTML=t}).then(function(){return n.classList.remove("loading")})}_(n,a,c,e),r&&d(null,ajax_var,s,a,r),o.addEventListener("keyup",function(){_("".concat(n,"/").concat(o.value),a,c,e)})}();