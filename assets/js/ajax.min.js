"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function asyncGeneratorStep(t,n,e,r,a,o,c){try{var i=t[o](c),s=i.value}catch(t){return void e(t)}i.done?n(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(i){return function(){var t=this,c=arguments;return new Promise(function(n,e){var r=i.apply(t,c);function a(t){asyncGeneratorStep(r,n,e,a,o,"next",t)}function o(t){asyncGeneratorStep(r,n,e,a,o,"throw",t)}a(void 0)})}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function artworksList(t){var r="";return"object"===_typeof(t)?(r+='<ul class="artwork-list">',t.forEach(function(t){var n=t.artwork_techniques,e=n.featured_techniques,n=n.other_techniques;r+='\n\t\t\t<li class="artwork" key="artwork-'.concat(t.slug,'">\n\t\t\t\t<div class="artwork__title"><a href="').concat(t.link,'">').concat(t.title.rendered,'</a></div>\n\t\t\t\t<div class="artwork__stuff">\n\t\t\t\t\t').concat(t.artwork_image_src?'<div class="artwork__thumbnail"><a href="'.concat(t.link,'" data-artwork="').concat(t.id,'">').concat(t.artwork_image_src,"</a></div>"):"",'\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_year,'</div>\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_condition,'</div>\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_copy,'</div>\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_paper,'</div>\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_size,"</div>\n\t\t\t\t\t").concat(t.artwork_loan?'<div class="artwork__info">'.concat(t.artwork_loan,"</div>"):"","\n\t\t\t\t\t").concat(t.artwork_sale?'<div class="artwork__info">'.concat(t.artwork_sale,"</div>"):"",'\n\t\t\t\t\t<div class="artwork__techniques">\n\t\t\t\t\t\t').concat(e.map(function(t){return'<a href="'.concat(t[1],'">').concat(t[0],"</a>")}).join("\n"),"\n\t\t\t\t\t\t").concat(n&&"<span>".concat(n,"</span>"),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="artwork__info">').concat(t.bp_artwork_info,"</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t")}),r+="</ul>"):r=t,r}function asyncGeneratorStep(t,n,e,r,a,o,c){try{var i=t[o](c),s=i.value}catch(t){return void e(t)}i.done?n(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(i){return function(){var t=this,c=arguments;return new Promise(function(n,e){var r=i.apply(t,c);function a(t){asyncGeneratorStep(r,n,e,a,o,"next",t)}function o(t){asyncGeneratorStep(r,n,e,a,o,"throw",t)}a(void 0)})}}function asyncFetch(t,n){return _asyncFetch.apply(this,arguments)}function _asyncFetch(){return(_asyncFetch=_asyncToGenerator(regeneratorRuntime.mark(function t(n,e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n,e);case 2:return r=t.sent,r=r.ok?r.json():"",t.abrupt("return",r);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){var t=ajax_var.nonce,n=ajax_var,o=n.lang,e=n.searchUrl,o=o?"".concat(o,"/"):"",e="".concat(e.slice(0,e.indexOf("wp-json"))).concat(o).concat(e.slice(e.indexOf("wp-json"))),a={method:"get",headers:new Headers({"Content-Type":"applications/json","X-WP-Nonce":t}),credentials:"same-origin"},r=document.querySelector(".artist-search"),c=document.querySelector(".artists__container"),i=document.querySelector(".artworks__container"),s=document.querySelector(".artwork__gallery");document.querySelectorAll(".initial-link").forEach(function(n){var e=new MoveTo({tolerance:10,duration:500,easing:"easeOutQuart",container:c});n.addEventListener("click",function(){var t=n.dataset.target,t=document.querySelector("[data-initial=".concat(t.toLowerCase(),"]"));e.move(t)})});function u(t,n,r){r.classList.add("loading"),asyncFetch(t,n).then(function(t){r.innerHTML="",Array.isArray(t)?_toConsumableArray(new Set(t.map(function(t){return t.order[0]}))).forEach(function(n){var e=document.createElement("div");e.classList.add("artists-group"),e.dataset.initial=n,e.insertAdjacentHTML("afterbegin",'\n\t\t\t\t\t\t\t<span class="artists-group__label">'.concat(n,"</span>\n\t\t\t\t\t\t")),t.filter(function(t){return t.order[0]===n}).forEach(function(t){var n=document.createElement("button");n.dataset.artist=t.term_id,n.classList.add("artist__button"),n.classList.add("inactive"),n.insertAdjacentText("afterbegin",t.name),n.addEventListener("click",function(t){!function(t,n,r,e){t.preventDefault();var a=t.target.dataset.artist,t=n.artworkUrl+a+"&order=asc&orderby=slug",n="".concat(n.artistUrl,"/").concat(a),t="".concat(t.slice(0,t.indexOf("wp-json"))).concat(o).concat(t.slice(t.indexOf("wp-json"))),n="".concat(n.slice(0,n.indexOf("wp-json"))).concat(o).concat(n.slice(n.indexOf("wp-json")));r.innerHTML="",r.classList.add("loading"),asyncFetch(t,e).then(function(o){var t=artworksList(o);r.insertAdjacentHTML("beforeend",t);var n=document.querySelectorAll(".artwork-list .artwork"),t=document.querySelectorAll(".artwork__thumbnail a");n.forEach(function(t){var n=t.querySelector(".artwork__stuff");t.querySelector(".artwork__title").addEventListener("click",function(t){t.preventDefault(),n.classList.toggle("visible")})}),t.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();var n,e,r,a=t.currentTarget.dataset.artwork;o.some(function(t){return t.id===parseInt(a)})&&(n=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wait(4e3);case 2:r.move(),requestAnimationFrame(n);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),s.innerHTML="",(e=document.createElement("div")).classList.add("slides"),s.insertAdjacentElement("afterbegin",e),o.filter(function(t){return t.id===parseInt(a)})[0].artwork_image_gallery.forEach(function(t){return e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t<div class="slide">\n\t\t\t\t\t\t\t\t'.concat(t,"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"))}),s.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t<div class="controls">\n\t\t\t\t\t\t\t\t<button class="goToPrev">← Prev</button>\n\t\t\t\t\t\t\t\t<button class="goToNext">Next →</button>\n\t\t\t\t\t\t\t</div>'),r=new Slider(s),requestAnimationFrame(n))})})}).then(function(){return r.classList.remove("loading")}),asyncFetch(n,e).then(function(t){var n=t.name,e=t.description,e="object"===_typeof(t)?"\n\t\t\t\t<h2>".concat(n,"</h2>\n\t\t\t\t<p>").concat(e,"</p>\n\t\t\t\t"):a;r.insertAdjacentHTML("afterbegin",e)})}(t,ajax_var,i,a)}),e.insertAdjacentElement("beforeend",n)}),r.insertAdjacentElement("beforeend",e)}):r.innerHTML=t}).then(function(){return r.classList.remove("loading")})}u(e,a,c),r.addEventListener("keyup",function(){u("".concat(e,"/").concat(r.value),a,c)})}();